<!DOCTYPE html>
<html style="overflow: hidden;">
<head>
  <meta charset="utf-8">
  <title>ShopByBlog | Widget</title>
  <link href="./css/bootstrap.css" rel="stylesheet">
  <link href="./css/smoothDivScroll.css" rel="stylesheet">
  <style>html,body{margin:0;background:none;overflow:hidden;}</style>
  <script>
    // (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    // (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    // m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    // })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    // ga('create', 'UA-26211480-1', 'snapwidget.com', {'name': 'snapwidget'});
    // ga('snapwidget.require', 'displayfeatures');
    // ga('snapwidget.send', 'pageview');
    </script>
</head>
<body style="overflow:hidden;padding-top:0;">
  <!--<script>ga('snapwidget.send', 'event', 'Free Widget', 'Installed', 'localhost');</script>-->
  <script id='grid-item-product-only' type='text/x-handlebars-template'>
    {{#each products}}

      {{#if @first}}
        <div class="results-area">
          <div class="col-sm-12">
            <div class="row grid-sections">
      {{/if}}

      <div class="col-xs-{{../colSize}}">
        <div style="position:relative;">
          <div class="clearfix mb10">
            <a href="http://localhost:3005/product/{{product.permalink}}" target="_blank"><img src="https://s3.amazonaws.com/shopbyblog.images/images/s_{{product.imageFileName}}" class="img-responsive"/></a>
          </div>
          <div style="position:absolute;top:20px;right:20px;" class="grid-avatar">
            {{#if product.ads}}
            <span class="badge">
              <i class="fa fa-star color-red"/><span class="color-black">Polecane</span>
            </span>
            {{/if}}
          </div>
        </div>
      </div>

      {{#if @last}}
            </div>
          </div>
        </div>
      {{/if}}

    {{/each}}
  </script>

  <div style="height: 100%; width: 100%; background-color: #;">
    <div class="container-wide" style="margin-top:0">
      <div class="row mb10 slicer">
        <div class="col-xs-7">
          <a href=""><h4 id="wTitle"></h4></a>
        </div>
        <div class="col-xs-5 align-right">
          <a href="" class="btn btn-sm btn-primary">&plus;<span class="hidden-xs2"> Obserwuj</span></a>
        </div>
      </div>
      <div class="row" id="results-area">

      </div>
      <div class="row">
        <div class="col-xs-12">
          <ul class="list-unstyled">
            <li class="small"><a class="btn btn-default btn-block" href="javascript:void(0)" onclick="alert('ip:'+myIP());alert('widget_id:'+getUrlVar('cols'))">Zobacz więcej...</a></li>
            <!-- <li class="small"><a class="small" href="javascript:void(0)" onclick="$('#results-area').append($('#sample').clone())">Dodaj produkt...</a></li> -->
            <!-- <li class="small" id="username" style="display:none;"></li> -->
            <!-- <li class="small notimp" style="font-size:11px;"></li> -->
          </ul>
          <p class="small notimp mb0" style="font-size:11px;"><a href="">Kup tutaj reklamę...</a> | Powered by <a class="small notimp" href="javascript:void(0)" onclick="$('#extra').show();" style="font-size:11px;">ShopByBlog</a></p>
        </div>
      </div>
      <div class="row" id="extra" style="display:none">
        <div class="col-xs-12">
          <p>hello</p>
        </div>
      </div>
    </div>
  </div>

  <script src="./js/iframeresize.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="../../js/lib/handlebars-v2.0.0.js"></script>

  <script>
function loadjsfile(filename){
  var fileref=document.createElement('script')
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", filename)
 if (typeof fileref!="undefined") {
  console.log('load', filename);
  document.getElementsByTagName("head")[0].appendChild(fileref)
}
}

    var hoverEffect = 'none';
    var fadeDelay = 100;
    var fadeOpacity = 0.5;

    if (hoverEffect === 'fadeIn') {
        $('.thumbnail')
            .fadeTo(0, fadeOpacity)
            .hover(function() {
                $(this).fadeTo(fadeDelay, 1);
            }, function() {
                $(this).fadeTo(fadeDelay, fadeOpacity);
            });
    } else if (hoverEffect === 'fadeOut') {
        $('.thumbnail')
            .hover(function() {
                $(this).fadeTo(fadeDelay, fadeOpacity);
            }, function() {
                $(this).fadeTo(fadeDelay, 1);
            });
    }
  </script>

  <script>
    function shareFB(url) {
        ga('snapwidget.send', 'event', 'Widget Sharing Buttons', 'Facebook Click', 'http://localhost:3005/widget-demo');
        url = url + '?cmpgn=grfb';
        url = 'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(url);
        popupwindow(url, 'twitter-tweet-dialog', 626, 436);
        return false;
    }

    function shareTwitter(url, text) {
        ga('snapwidget.send', 'event', 'Widget Sharing Buttons', 'Twitter Click', 'http://localhost:3005/widget-demo');
        url = url + '?cmpgn=grtwtr';
        url = 'https://twitter.com/share?url='+encodeURIComponent(url)+'&text='+encodeURIComponent(text)+'&via=snapwidget';
        popupwindow(url, 'twitter-tweet-dialog', 575, 350);
        return false;
    }

    function popupwindow(url, title, w, h) {
        var left = (screen.width/2)-(w/2);
        var top = (screen.height/2)-(h/2);
        window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
    }

    function myIP() {
        if (window.XMLHttpRequest) xmlhttp = new XMLHttpRequest();
        else xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

        xmlhttp.open("GET","http://api.hostip.info/get_html.php",false);
        xmlhttp.send();

        hostipInfo = xmlhttp.responseText.split("\n");

        for (i=0; hostipInfo.length >= i; i++) {
            ipAddress = hostipInfo[i].split(":");
            if ( ipAddress[0] == "IP" ) return ipAddress[1];
        }

        return false;
    }

    function getUrlVars(){
      // console.log('url', window.location.href);
      var vars = [], hash;
      var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
      for(var i = 0; i < hashes.length; i++)
      {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
      }
      return vars;
    }

    function getUrlVar(name){
      return this.getUrlVars()[name];
    }

    // getURIParameter("id")  // returns the last id or null if not present
    // getURIParameter("id", true) // returns an array of all ids

    function getURIParameter(param, asArray) {
      return document.location.search.substring(1).split('&').reduce(function(p,c) {
        var parts = c.split('=', 2).map(function(param) { return decodeURIComponent(param); });
        if(parts.length == 0 || parts[0] != param) return (p instanceof Array) && !asArray ? null : p;
        return asArray ? p.concat(parts.concat(true)[1]) : parts.concat(true)[1];
      }, []);
    }

    $(document).ready(function() {
      $.getScript( './locales/'+getUrlVar('locale')+'.js', function( data, textStatus, jqxhr ) {
        // console.log( data ); // Data returned
        // console.log( textStatus ); // Success
        // console.log( jqxhr.status ); // 200
        console.log( "Load was performed." );
        $('#wTitle').html(__CTA[getUrlVar('cta')]);
        var limit = 10;
        var colSize = 6;
        if(getUrlVar('format')=='2x5') {
          limit = 10;
          colSize = 6;
        }
        if(getUrlVar('format')=='3x4') {
          limit = 12;
          colSize = 4;
        }
        if(getUrlVar('format')=='4x1') {
          limit = 4;
          colSize = 3;
        }
        if(getUrlVar('format')=='4x2') {
          limit = 8;
          colSize = 3;
        }

        $.getJSON( './data/u_' + getUrlVar('eid') + '.json?t='+Math.floor(Date.now() / 1000), function( data ) {
          $('#username').html('Loaded user: ' + data.profile.username).show();
          // SBBProduct.getList(criteria, function(data) {
          // console.log(data);

            var source = $("#grid-item-product-only").html();

            var template = Handlebars.compile(source);

            var context = {colSize: colSize, products: data.products.slice(0, limit)};
            var html    = template(context);

            $('#results-area').append(html);
          //   SBB.initResizeGrid();
          // });

          // var items = [];
          // $.each( data, function( key, val ) {
          //   items.push( "<li id='" + key + "'>" + val + "</li>" );
          // });

          // $( "<ul/>", {
          //   "class": "my-new-list",
          //   html: items.join( "" )
          // }).appendTo( "body" );
        });

      });

      // loadjsfile('');
      // console.log('widget locale', getUrlVar('locale'));
    })


  </script>
</body>
</html>

<!-- 13th December 2014 17:07 -->